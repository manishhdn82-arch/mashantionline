<!DOCTYPE html>
<html lang="hi">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>MA SHANTI ONLINE CENTER</title>
  <style>
    body {
      font-family: 'Poppins', sans-serif;
      background: linear-gradient(to right, #e3f2fd, #e1bee7);
      margin: 0;
      padding: 0;
      text-align: center;
    }
    header {
      background: #6200ea;
      color: white;
      padding: 15px 20px;
      font-size: 28px;
      font-weight: bold;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    #user-name {
      font-size: 18px;
      color: #fff;
    }
    marquee {
      background: #ff4081;
      color: white;
      font-weight: bold;
      padding: 10px;
      font-size: 18px;
    }
    .login-container, .dashboard {
      margin-top: 40px;
    }
    button {
      background: #6200ea;
      color: white;
      border: none;
      padding: 10px 20px;
      border-radius: 5px;
      font-size: 16px;
      cursor: pointer;
      margin: 10px;
      transition: transform 0.2s ease;
    }
    button:hover {
      background: #3700b3;
      transform: scale(1.05);
    }
    .services {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      margin-top: 30px;
    }
    .service-btn {
      background: #03a9f4;
      color: white;
      padding: 10px 20px;
      border-radius: 20px;
      margin: 10px;
      cursor: pointer;
      transition: transform 0.3s ease;
    }
    .service-btn:hover {
      transform: scale(1.1);
      background: #0288d1;
    }
    #user-form {
      display: none;
      margin: 20px auto;
      background: #fff;
      padding: 20px;
      border-radius: 10px;
      max-width: 400px;
      box-shadow: 0 4px 8px rgba(0,0,0,0.2);
    }
    input, select {
      width: 90%;
      padding: 8px;
      margin: 10px 0;
      border-radius: 5px;
      border: 1px solid #ccc;
    }
    .user-card {
      background: #fff;
      margin: 20px auto;
      padding: 15px;
      border-radius: 10px;
      max-width: 400px;
      box-shadow: 0 4px 8px rgba(0,0,0,0.2);
      color: #333;
    }
  </style>
</head>
<body>
  <header>
    <div>üå∏ MA SHANTI ONLINE CENTER üå∏</div>
    <div id="user-name"></div>
  </header>

  <marquee behavior="scroll" direction="left">
    Government & Citizen Services ‚Ä¢ Aadhaar ‚Ä¢ e-District ‚Ä¢ Pension ‚Ä¢ FSSAI ‚Ä¢ e-Shram ‚Ä¢ e-Vahan ‚Ä¢ PAN ‚Ä¢ Legal Literacy
  </marquee>

  <div class="login-container" id="login-container">
    <h2>‡§∏‡•ç‡§µ‡§æ‡§ó‡§§ ‡§π‡•à! ‡§ï‡•É‡§™‡§Ø‡§æ ‡§∏‡§æ‡§á‡§® ‡§á‡§® ‡§ï‡§∞‡•á‡§Ç</h2>
    <button id="googleSignIn">Google ‡§∏‡•á ‡§∏‡§æ‡§á‡§® ‡§á‡§® ‡§ï‡§∞‡•á‡§Ç</button>
  </div>

  <div id="user-form">
    <h3>‡§Ö‡§™‡§®‡•Ä ‡§ú‡§æ‡§®‡§ï‡§æ‡§∞‡•Ä ‡§¶‡§∞‡•ç‡§ú ‡§ï‡§∞‡•á‡§Ç</h3>
    <input type="text" id="name" placeholder="‡§™‡•Ç‡§∞‡§æ ‡§®‡§æ‡§Æ" required />
    <input type="text" id="mobile" placeholder="‡§Æ‡•ã‡§¨‡§æ‡§á‡§≤ ‡§®‡§Ç‡§¨‡§∞" required />
    <select id="gender">
      <option value="">‡§≤‡§ø‡§Ç‡§ó ‡§ö‡•Å‡§®‡•á‡§Ç</option>
      <option value="Male">‡§™‡•Å‡§∞‡•Å‡§∑</option>
      <option value="Female">‡§Æ‡§π‡§ø‡§≤‡§æ</option>
      <option value="Other">‡§Ö‡§®‡•ç‡§Ø</option>
    </select>
    <button id="saveDetails">‡§ú‡§æ‡§®‡§ï‡§æ‡§∞‡•Ä ‡§∏‡§π‡•á‡§ú‡•á‡§Ç</button>
  </div>

  <div class="dashboard" id="dashboard" style="display:none;">
    <div class="user-card" id="user-card"></div>
    <h2>‡§π‡§Æ‡§æ‡§∞‡•Ä CSC ‡§∏‡•á‡§µ‡§æ‡§è‡§Å</h2>
    <div class="services">
      <div class="service-btn">Aadhaar</div>
      <div class="service-btn">e-District</div>
      <div class="service-btn">Pension</div>
      <div class="service-btn">FSSAI</div>
      <div class="service-btn">e-Shram</div>
      <div class="service-btn">e-Vahan</div>
      <div class="service-btn">PAN</div>
      <div class="service-btn">Legal Literacy</div>
    </div>
  </div>

  <!-- Firebase SDK -->
  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";
    import { getAuth, signInWithPopup, GoogleAuthProvider, signOut } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-auth.js";
    import { getFirestore, doc, getDoc, setDoc } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore.js";

    const firebaseConfig = {
      apiKey: "AIzaSyBIcvxRGIOSGn1YUu6q6_xjKQt0kvxlHf8",
      authDomain: "online-sarvice-12dc5.firebaseapp.com",
      projectId: "online-sarvice-12dc5",
      storageBucket: "online-sarvice-12dc5.firebasestorage.app",
      messagingSenderId: "537058045361",
      appId: "1:537058045361:web:d4b39f1466cc320af66190",
      measurementId: "G-8KM3NBW8XN"
    };

    const app = initializeApp(firebaseConfig);
    const auth = getAuth(app);
    const db = getFirestore(app);
    const provider = new GoogleAuthProvider();

    const googleSignInBtn = document.getElementById('googleSignIn');
    const loginContainer = document.getElementById('login-container');
    const userForm = document.getElementById('user-form');
    const dashboard = document.getElementById('dashboard');
    const saveDetailsBtn = document.getElementById('saveDetails');
    const userNameDisplay = document.getElementById('user-name');
    const userCard = document.getElementById('user-card');

    let currentUser = null;

    googleSignInBtn.addEventListener('click', async () => {
      try {
        const result = await signInWithPopup(auth, provider);
        const user = result.user;
        currentUser = user;

        const userDocRef = doc(db, "users", user.uid);
        const userDoc = await getDoc(userDocRef);

        if (userDoc.exists()) {
          showDashboard(userDoc.data());
        } else {
          userForm.style.display = "block";
          loginContainer.style.display = "none";
        }
      } catch (error) {
        alert("‡§§‡•ç‡§∞‡•Å‡§ü‡§ø: " + error.message);
      }
    });

    saveDetailsBtn.addEventListener('click', async () => {
      const name = document.getElementById('name').value.trim();
      const mobile = document.getElementById('mobile').value.trim();
      const gender = document.getElementById('gender').value;

      if (!name || !mobile || !gender) {
        alert("‡§ï‡•É‡§™‡§Ø‡§æ ‡§∏‡§≠‡•Ä ‡§´‡§º‡•Ä‡§≤‡•ç‡§° ‡§≠‡§∞‡•á‡§Ç!");
        return;
      }

      if (currentUser) {
        await setDoc(doc(db, "users", currentUser.uid), { name, mobile, gender, email: currentUser.email });
        showDashboard({ name, mobile, gender });
      }
    });

    function showDashboard(data) {
      userNameDisplay.innerHTML = `${data.name} <button id='signOutBtn'>‡§∏‡§æ‡§á‡§® ‡§Ü‡§â‡§ü</button>`;
      userForm.style.display = "none";
      dashboard.style.display = "block";
      loginContainer.style.display = "none";
      userCard.innerHTML = `<h3>‡§Ø‡•Ç‡§ú‡§º‡§∞ ‡§ú‡§æ‡§®‡§ï‡§æ‡§∞‡•Ä</h3><p><b>‡§®‡§æ‡§Æ:</b> ${data.name}</p><p><b>‡§Æ‡•ã‡§¨‡§æ‡§á‡§≤:</b> ${data.mobile}</p><p><b>‡§≤‡§ø‡§Ç‡§ó:</b> ${data.gender}</p>`;
      document.getElementById('signOutBtn').addEventListener('click', userSignOut);
    }

    async function userSignOut() {
      await signOut(auth);
      currentUser = null;
      userNameDisplay.textContent = '';
      dashboard.style.display = 'none';
      loginContainer.style.display = 'block';
    }
  </script>
</body>
</html>
